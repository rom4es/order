(function(e){function t(t){for(var i,s,o=t[0],l=t[1],u=t[2],m=0,c=[];m<o.length;m++)s=o[m],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&c.push(a[s][0]),a[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);d&&d(t);while(c.length)c.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],i=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(i=!1)}i&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var i={},a={app:0},n=[];function s(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=i,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(r,i,function(t){return e[t]}.bind(null,i));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var d=l;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var i=r("85ec"),a=r.n(i);a.a},5613:function(e,t,r){e.exports=r.p+"img/preloader.2387e1cd.svg"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("h2",[e._v("Оформление заказа")]),e.state.submitted?r("div",{staticClass:"order-submitted"},[e._v("Заказ оформлен!")]):r("div",{staticClass:"order"},[e.basketItems.length?r("div",[r("table",{staticClass:"basket-list"},[e._m(0),e._l(e.basketItems,(function(t){return r("BasketItem",{key:t.id,tag:"tr",attrs:{item:t},on:{"change-quantity":e.changeQuantity,"delete-item":e.deleteItem}})}))],2),r("h3",[e._v("Данные к заказу")]),r("DataOrder",{attrs:{form:e.form,deliveryPrice:e.deliveryPrice,total:e.total,state:e.state},on:{"sending-form":e.sendingForm,"submitted-form":e.submittedForm}})],1):r("div",[e._v("Ваша корзина пуста")])])])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",[e._v("Название")]),r("th",[e._v("Количество")]),r("th",[e._v("Цена")]),r("th",[e._v("Сумма")]),r("th")])}],s=(r("c740"),r("4160"),r("a434"),r("159b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("td",[e._v(e._s(e.item.name))]),r("td",[r("button",{staticClass:"quantity-btn",on:{click:e.reduceQuantity}},[e._v("-")]),r("input",{attrs:{type:"text",name:"q"},domProps:{value:e.quantity},on:{input:function(t){return e.changeQuantity(t)}}}),r("button",{staticClass:"quantity-btn",on:{click:e.addQuantity}},[e._v("+")])]),r("td",[e._v(e._s(e.item.sum)+" руб.")]),r("td",[e._v(e._s(e.total)+" руб.")]),r("td",[r("button",{staticClass:"btn",on:{click:function(t){return e.$emit("delete-item",e.item.id)}}},[e._v("Удалить")])])])}),o=[],l=(r("a9e3"),r("ac1f"),r("5319"),{name:"BasketItem",props:["item"],data:function(){return{quantity:this.item.quantity}},computed:{total:function(){return this.quantity*this.item.sum}},methods:{reduceQuantity:function(){this.quantity--,this.validateQuantity()},addQuantity:function(){this.quantity++,this.validateQuantity()},changeQuantity:function(e){this.quantity=e.target.value,this.validateQuantity()},validateQuantity:function(){var e=String(this.quantity);e=e.replace(/[^-\d]/g,""),e=Number(e),this.quantity=e,e<1&&(this.quantity=1),e>99&&(this.quantity=99),this.$emit("change-quantity",this.item.id,this.quantity)}}}),u=l,d=r("2877"),m=Object(d["a"])(u,s,o,!1,null,null,null),c=m.exports,v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("form",{attrs:{action:"",method:"post"},on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[i("div",{staticClass:"b-input",class:{error:e.validate.name.error}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],attrs:{type:"text",name:"name",placeholder:"Имя*"},domProps:{value:e.form.name},on:{input:[function(t){t.target.composing||e.$set(e.form,"name",t.target.value)},function(t){return e.resetError("name")}]}}),i("p",{staticClass:"error-message"},[e._v(e._s(e.validate.name.errorMsg))])]),i("div",{staticClass:"b-input",class:{error:e.validate.phone.error}},[i("masked-input",{attrs:{type:"text",name:"phone",placeholder:"Телефон*",mask:"\\+\\7 (111) 111-11-11"},on:{input:function(t){return e.resetError("phone")}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}),i("p",{staticClass:"error-message"},[e._v(e._s(e.validate.phone.errorMsg))])],1),i("div",{staticClass:"b-input",class:{error:e.validate.email.error}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],attrs:{type:"text",name:"email",placeholder:"Email*"},domProps:{value:e.form.email},on:{input:[function(t){t.target.composing||e.$set(e.form,"email",t.target.value)},function(t){return e.resetError("email")}]}}),i("p",{staticClass:"error-message"},[e._v(e._s(e.validate.email.errorMsg))])]),i("h4",[e._v("Способ доставки")]),i("div",{staticClass:"b-radio-list"},[i("div",{staticClass:"b-radio"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.delivery,expression:"form.delivery"}],attrs:{id:"ladel-delivery",type:"radio",name:"delivery",value:"delivery"},domProps:{checked:e._q(e.form.delivery,"delivery")},on:{change:function(t){return e.$set(e.form,"delivery","delivery")}}}),i("label",{attrs:{for:"ladel-delivery"}},[e._v("Доставка по городу")])]),i("div",{staticClass:"b-radio"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.delivery,expression:"form.delivery"}],attrs:{id:"ladel-pickup",type:"radio",name:"delivery",value:"pickup"},domProps:{checked:e._q(e.form.delivery,"pickup")},on:{change:[function(t){return e.$set(e.form,"delivery","pickup")},function(t){return e.resetError("address")}]}}),i("label",{attrs:{for:"ladel-pickup"}},[e._v("Самовывоз")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"delivery"==e.form.delivery,expression:"form.delivery == 'delivery'"}],staticClass:"b-input",class:{error:e.validate.address.error}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.address,expression:"form.address"}],attrs:{type:"text",name:"address",placeholder:"Адрес доставки*",disabled:"pickup"==e.form.delivery},domProps:{value:e.form.address},on:{input:[function(t){t.target.composing||e.$set(e.form,"address",t.target.value)},function(t){return e.resetError("address")}]}}),i("p",{staticClass:"error-message"},[e._v(e._s(e.validate.address.errorMsg))])])]),i("h4",{staticClass:"delivery-price"},[e._v("Стоимость доставки: "+e._s(e.deliveryPriceText()))]),i("h4",{staticClass:"totals"},[e._v("Общая сумма: "+e._s(e.total)+" руб.")]),e.state.sending?i("img",{staticClass:"preloader",attrs:{src:r("5613")}}):i("button",{staticClass:"btn order-btn"},[e._v("Оформить заказ")])])},f=[],p=(r("b0c0"),r("ab99")),h={name:"DataOrder",components:{MaskedInput:p["a"]},data:function(){return{validate:{name:{error:!1,errorMsg:""},phone:{error:!1,errorMsg:""},email:{error:!1,errorMsg:""},address:{error:!1,errorMsg:""}}}},props:["form","deliveryPrice","total","state"],methods:{deliveryPriceText:function(){return this.deliveryPrice>0?this.deliveryPrice+" руб.":"бесплатно"},submitForm:function(){var e=this,t={name:this.form.name,phone:this.form.phone,email:this.form.email,address:this.form.address},r=!0;for(var i in t)"address"==i?t[i]||"delivery"!=e.form.delivery||(this.setError(i,"Поле обязательное"),r=!1):t[i]||(this.setError(i,"Поле обязательное"),r=!1),"email"==i&&t[i]&&!e.validEmail(t[i])&&(this.setError(i,"Неверный email"),r=!1);r&&(e.$emit("sending-form"),setTimeout((function(){e.$emit("submitted-form")}),1e3))},validEmail:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},setError:function(e,t){this.validate[e].error=!0,this.validate[e].errorMsg=t},resetError:function(e){this.validate[e].error=!1}}},y=h,b=Object(d["a"])(y,v,f,!1,null,null,null),g=b.exports,_={name:"App",components:{BasketItem:c,DataOrder:g},data:function(){return{basketItems:[{id:343,name:"Товар 1",quantity:1,sum:300},{id:12,name:"Товар 2",quantity:4,sum:400},{id:1002,name:"Товар 3",quantity:3,sum:550}],form:{name:"",phone:"",email:"",delivery:"delivery",address:"",coupon:""},deliveryPriceValue:300,state:{sending:!1,submitted:!1}}},methods:{changeQuantity:function(e,t){var r=this.getItemIndex(e);r>=0&&(this.basketItems[r].quantity=t)},deleteItem:function(e){var t=this.getItemIndex(e);t>=0&&this.basketItems.splice(t,1)},getItemIndex:function(e){return this.basketItems.findIndex((function(t){return t.id===e}))},sendingForm:function(){this.state.sending=!0,this.state.submitted=!1},submittedForm:function(){this.state.sending=!1,this.state.submitted=!0}},computed:{deliveryPrice:function(){return"delivery"==this.form.delivery?this.deliveryPriceValue:0},total:function(){var e=0;return this.basketItems.forEach((function(t){e+=t.quantity*t.sum})),e+=this.deliveryPrice,e}}},k=_,x=(r("034f"),Object(d["a"])(k,a,n,!1,null,null,null)),q=x.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(q)}}).$mount("#app")},"85ec":function(e,t,r){}});
//# sourceMappingURL=app.e719f581.js.map